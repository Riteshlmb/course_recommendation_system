{"ast":null,"code":"// src/actions/authActions.js\nimport axios from \"axios\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport axiosInstance, { updateAxiosInstanceToken } from \"../utils/axiosInstance\";\nexport const loginUser = (credentials, history) => dispatch => {\n  axios.post(\"http://localhost:8000/api/auth/token/login/\", credentials).then(res => {\n    const {\n      token,\n      user\n    } = res.data;\n    dispatch({\n      type: \"LOGIN_SUCCESS\",\n      payload: {\n        token,\n        user\n      }\n    });\n    setAuthToken(token);\n    history.push(\"/\");\n  }).catch(err => {\n    dispatch({\n      type: \"AUTH_ERROR\"\n    });\n  });\n};\nexport const registerUser = (userData, history) => dispatch => {\n  axios.post(\"/api/auth/register\", userData).then(res => {\n    const {\n      token,\n      user\n    } = res.data;\n    dispatch({\n      type: \"REGISTER_SUCCESS\",\n      payload: {\n        token,\n        user\n      }\n    });\n    setAuthToken(token);\n    history.push(\"/\");\n  }).catch(err => {\n    dispatch({\n      type: \"AUTH_ERROR\"\n    });\n  });\n};\nexport const logoutUser = () => dispatch => {\n  axiosInstance.post(\"/auth/token/logout/\").then(() => {\n    localStorage.removeItem(\"token\");\n    updateAxiosInstanceToken(null);\n    dispatch({\n      type: LOGOUT\n    });\n  }).catch(err => {\n    // Handle error if necessary\n    dispatch({\n      type: AUTH_ERROR,\n      payload: err.response ? err.response.data : {\n        error: \"Network Error\"\n      }\n    });\n  });\n};","map":{"version":3,"names":["axios","setAuthToken","axiosInstance","updateAxiosInstanceToken","loginUser","credentials","history","dispatch","post","then","res","token","user","data","type","payload","push","catch","err","registerUser","userData","logoutUser","localStorage","removeItem","LOGOUT","AUTH_ERROR","response","error"],"sources":["/Users/sachchidanandtiwari/course-recommendation-frontend/src/actions/authActions.js"],"sourcesContent":["// src/actions/authActions.js\nimport axios from \"axios\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport axiosInstance, {\n    updateAxiosInstanceToken,\n} from \"../utils/axiosInstance\";\n\nexport const loginUser = (credentials, history) => (dispatch) => {\n    axios\n        .post(\"http://localhost:8000/api/auth/token/login/\", credentials)\n        .then((res) => {\n            const { token, user } = res.data;\n            dispatch({\n                type: \"LOGIN_SUCCESS\",\n                payload: { token, user },\n            });\n            setAuthToken(token);\n            history.push(\"/\");\n        })\n        .catch((err) => {\n            dispatch({\n                type: \"AUTH_ERROR\",\n            });\n        });\n};\n\nexport const registerUser = (userData, history) => (dispatch) => {\n    axios\n        .post(\"/api/auth/register\", userData)\n        .then((res) => {\n            const { token, user } = res.data;\n            dispatch({\n                type: \"REGISTER_SUCCESS\",\n                payload: { token, user },\n            });\n            setAuthToken(token);\n            history.push(\"/\");\n        })\n        .catch((err) => {\n            dispatch({\n                type: \"AUTH_ERROR\",\n            });\n        });\n};\n\nexport const logoutUser = () => (dispatch) => {\n    axiosInstance\n        .post(\"/auth/token/logout/\")\n        .then(() => {\n            localStorage.removeItem(\"token\");\n            updateAxiosInstanceToken(null);\n            dispatch({ type: LOGOUT });\n        })\n        .catch((err) => {\n            // Handle error if necessary\n            dispatch({\n                type: AUTH_ERROR,\n                payload: err.response\n                    ? err.response.data\n                    : { error: \"Network Error\" },\n            });\n        });\n};\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,uBAAuB;AAChD,OAAOC,aAAa,IAChBC,wBAAwB,QACrB,wBAAwB;AAE/B,OAAO,MAAMC,SAAS,GAAGA,CAACC,WAAW,EAAEC,OAAO,KAAMC,QAAQ,IAAK;EAC7DP,KAAK,CACAQ,IAAI,CAAC,6CAA6C,EAAEH,WAAW,CAAC,CAChEI,IAAI,CAAEC,GAAG,IAAK;IACX,MAAM;MAAEC,KAAK;MAAEC;IAAK,CAAC,GAAGF,GAAG,CAACG,IAAI;IAChCN,QAAQ,CAAC;MACLO,IAAI,EAAE,eAAe;MACrBC,OAAO,EAAE;QAAEJ,KAAK;QAAEC;MAAK;IAC3B,CAAC,CAAC;IACFX,YAAY,CAACU,KAAK,CAAC;IACnBL,OAAO,CAACU,IAAI,CAAC,GAAG,CAAC;EACrB,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;IACZX,QAAQ,CAAC;MACLO,IAAI,EAAE;IACV,CAAC,CAAC;EACN,CAAC,CAAC;AACV,CAAC;AAED,OAAO,MAAMK,YAAY,GAAGA,CAACC,QAAQ,EAAEd,OAAO,KAAMC,QAAQ,IAAK;EAC7DP,KAAK,CACAQ,IAAI,CAAC,oBAAoB,EAAEY,QAAQ,CAAC,CACpCX,IAAI,CAAEC,GAAG,IAAK;IACX,MAAM;MAAEC,KAAK;MAAEC;IAAK,CAAC,GAAGF,GAAG,CAACG,IAAI;IAChCN,QAAQ,CAAC;MACLO,IAAI,EAAE,kBAAkB;MACxBC,OAAO,EAAE;QAAEJ,KAAK;QAAEC;MAAK;IAC3B,CAAC,CAAC;IACFX,YAAY,CAACU,KAAK,CAAC;IACnBL,OAAO,CAACU,IAAI,CAAC,GAAG,CAAC;EACrB,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;IACZX,QAAQ,CAAC;MACLO,IAAI,EAAE;IACV,CAAC,CAAC;EACN,CAAC,CAAC;AACV,CAAC;AAED,OAAO,MAAMO,UAAU,GAAGA,CAAA,KAAOd,QAAQ,IAAK;EAC1CL,aAAa,CACRM,IAAI,CAAC,qBAAqB,CAAC,CAC3BC,IAAI,CAAC,MAAM;IACRa,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;IAChCpB,wBAAwB,CAAC,IAAI,CAAC;IAC9BI,QAAQ,CAAC;MAAEO,IAAI,EAAEU;IAAO,CAAC,CAAC;EAC9B,CAAC,CAAC,CACDP,KAAK,CAAEC,GAAG,IAAK;IACZ;IACAX,QAAQ,CAAC;MACLO,IAAI,EAAEW,UAAU;MAChBV,OAAO,EAAEG,GAAG,CAACQ,QAAQ,GACfR,GAAG,CAACQ,QAAQ,CAACb,IAAI,GACjB;QAAEc,KAAK,EAAE;MAAgB;IACnC,CAAC,CAAC;EACN,CAAC,CAAC;AACV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}